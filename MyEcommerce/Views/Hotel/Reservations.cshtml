@using MyEcom.Common.RabbitmqDto;

@model List<ReservationViewDto>

@{
    ViewBag.Title = "Reservations";
}
@*

    <div class="col-md-12 ">
        <div class="row" id="reservation">

            <div class="portlet box purple ">
                <div class="portlet-title">
                    <div class="caption">
                        <i class="fa fa-cogs"></i>Reservation List
                    </div>
                    <div class="tools">
                        <a href="javascript:;" class="collapse" data-original-title="" title=""> </a>
                        <a href="#portlet-config" data-toggle="modal" class="config" data-original-title="" title=""> </a>
                        <a href="javascript:;" class="reload" data-original-title="" title=""> </a>
                        <a href="javascript:;" class="remove" data-original-title="" title=""> </a>
                    </div>
                </div>
                <div class="portlet-body">
                    <div class="table-scrollable">
                        <table class="table table-striped table-bordered table-hover">
                            <thead>
                                <tr>
                                    <th style="text-align:center">Room</th>
                                    <th style="text-align:center">Room Number</th>
                                    <th style="text-align:center">Full Name</th>
                                    <th style="text-align:center">E-mail</th>
                                    <th style="text-align:center">Phone</th>
                                    <th style="text-align:center">Check-in</th>
                                    <th style="text-align:center">Check-ot</th>
                                    <th style="text-align:center">Action</th>
                                    <th style="text-align:center">Action</th>
                                </tr>


                            </thead>
                            <tbody>
                                @foreach (var item in Model)
                                {
                                    <tr>
                                        <td>
                                            <img src="~/Content/images/@item.RoomImage" width="120px" height="70px" />
                                        </td>

                                        <td style="text-align:center;padding-top:4%">@item.roomid</td>
                                        <td style="text-align:center;padding-top:4%">@item.Name</td>
                                        <td style="text-align:center;padding-top:4%">@item.Email</td>
                                        <td style="text-align:center;padding-top:4%">@item.Phone</td>
                                        <td style="text-align:center;padding-top:4%">@item.checkin</td>
                                        <td style="text-align:center;padding-top:4%">@item.checkout</td>
                                        <td>
                                            <button type="submit" class="btn btn-primary" style="margin-top:30%;">Refuse</button>
                                        </td>
                                        <td>
                                            <button type="submit" class="btn btn-danger" style="margin-top:30%;">Accept</button>
                                        </td>
                                    </tr>
                                }

                            </tbody>
                        </table>
                    </div>
                </div>
            </div>



        </div>

    </div>
*@
<div class="row" id="reservation">

</div>
<script src="~/Scripts/jquery.signalR-2.3.0.min.js"></script>
<script src="~/signalr/hubs"></script>
<script type="text/javascript">
    $(function () {
        
        
        var res = $.connection.reservationHub;

        res.client.updateMessages = function () {
            getReservation()

        };
        // Bağlantı başlangıç
        $.connection.hub.start().done(function () {
            getReservation();
        }).fail(function (e) {
            alert(e);
        });
    });

    function getReservation() {
        alert(" get reservatişon çalıştı");
        $('#reservation').load("/Hotel/ReservationList");
       
        //$.ajax({
        //    url: '/Home/GetRes',
        //    contentType: 'application/html ; charset:utf-8',
        //    type: 'GET',
        //    dataType: 'html'
        //}).success(function (result) {
        //    tbl.load(result);
        //}).error(function () {

        //});
    }
</script>
